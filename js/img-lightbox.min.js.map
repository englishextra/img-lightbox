{"version":3,"sources":["img-lightbox.js"],"names":["root","document","setDisplayBlock","func","bind","this","hideImgLightbox","callback","classList","container","remove","fadeInClass","setDisplayNone","clearTimeout","timer","hideContainer","callCallback","fadeOutClass","img","setTimeout","hideImg","isLoadedClass","getElementsByTagName","e","style","fadeInUpClass","fadeOutDownClass","docBody","imgLightbox","_linkClass","docElem","onLoaded","options","onCreated","imgLightboxOpenClass","documentElement","body","animatedClass","containerClass","imgLightboxWindowIsBindedClass","imgLightboxLinkIsBindedClass","dummySrc","isTouch","isMobile","userAgent","match","undefined","context","getElementsByClassName","settings","createElement","onError","html","onClosed","innerHTML","btnClose","addEventListener","push","appendChild","hrefString","handleImgLightboxLink","handleImgLightboxContainer","ev","preventDefault","contains","add","stopPropagation","wait","args","timeout","slice","call","arguments","Date","later","last","timestamp","apply","debounce","logic","onload","onerror","link","arrange","display","rate"],"mappings":"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","file":"img-lightbox.min.js","sourcesContent":["/*!\n * @see {@link https://github.com/englishextra/img-lightbox}\n * imgLightbox\n * requires this very img-lightbox.js, and animate.css, img-lightbox.css\n * @params {String} linkClass\n * @params {Object} settings object\n * imgLightbox(linkClass, settings)\n * passes jshint\n */\n/*jslint browser: true */\n/*jslint node: true */\n/*jshint -W014 */\n(function (root, document) {\n\t\"use strict\";\n\tvar docElem = document.documentElement || \"\";\n\tvar docBody = document.body || \"\";\n\tvar animatedClass = \"animated\";\n\tvar btnCloseClass = \"btn-close\";\n\tvar containerClass = \"img-lightbox\";\n\tvar fadeInClass = \"fadeIn\";\n\tvar fadeInUpClass = \"fadeInUp\";\n\tvar fadeOutClass = \"fadeOut\";\n\tvar fadeOutDownClass = \"fadeOutDown\";\n\tvar imgLightboxWindowIsBindedClass = \"img-lightbox-window--is-binded\";\n\tvar imgLightboxOpenClass = \"img-lightbox--open\";\n\tvar imgLightboxLinkIsBindedClass = \"img-lightbox-link--is-binded\";\n\tvar isLoadedClass = \"is-loaded\";\n\tvar dummySrc = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=\";\n\tvar isMobile = navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i);\n\tvar isTouch = isMobile !== null || document.createTouch !== undefined || \"ontouchstart\" in root || \"onmsgesturechange\" in root || navigator.msMaxTouchPoints;\n\t\tvar debounce = function (func, wait) {\n\t\t\tvar timeout;\n\t\t\tvar args;\n\t\t\tvar context;\n\t\t\tvar timestamp;\n\t\t\treturn function () {\n\t\t\t\tcontext = this;\n\t\t\t\targs = [].slice.call(arguments, 0);\n\t\t\t\ttimestamp = new Date();\n\t\t\t\tvar later = function () {\n\t\t\t\t\tvar last = (new Date()) - timestamp;\n\t\t\t\t\tif (last < wait) {\n\t\t\t\t\t\ttimeout = setTimeout(later, wait - last);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttimeout = null;\n\t\t\t\t\t\tfunc.apply(context, args);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tif (!timeout) {\n\t\t\t\t\ttimeout = setTimeout(later, wait);\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\tvar callCallback = function (func, data) {\n\t\tif (typeof func !== \"function\") {\n\t\t\treturn;\n\t\t}\n\t\tvar caller = func.bind(this);\n\t\tcaller(data);\n\t};\n\tvar setDisplayBlock = function (e) {\n\t\tif (e) {\n\t\t\te.style.display = \"block\";\n\t\t}\n\t};\n\tvar setDisplayNone = function (e) {\n\t\tif (e) {\n\t\t\te.style.display = \"none\";\n\t\t}\n\t};\n\tvar hideImgLightbox = function (callback) {\n\t\tvar container = document.getElementsByClassName(containerClass)[0] || \"\";\n\t\tvar img = container ? container.getElementsByTagName(\"img\")[0] || \"\" : \"\";\n\t\tvar hideContainer = function () {\n\t\t\tcontainer.classList.remove(fadeInClass);\n\t\t\tcontainer.classList.add(fadeOutClass);\n\t\t\tvar hideImg = function () {\n\t\t\t\tcontainer.classList.remove(animatedClass);\n\t\t\t\tcontainer.classList.remove(fadeOutClass);\n\t\t\t\timg.classList.remove(animatedClass);\n\t\t\t\timg.classList.remove(fadeOutDownClass);\n\t\t\t\timg.onload = function () {\n\t\t\t\t\tcontainer.classList.remove(isLoadedClass);\n\t\t\t\t};\n\t\t\t\timg.src = dummySrc;\n\t\t\t\tsetDisplayNone(container);\n\t\t\t\tcallCallback(callback, root);\n\t\t\t};\n\t\t\tvar timer = setTimeout(function () {\n\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t\ttimer = null;\n\t\t\t\t\thideImg();\n\t\t\t\t}, 400);\n\t\t};\n\t\tif (container && img) {\n\t\t\timg.classList.remove(fadeInUpClass);\n\t\t\timg.classList.add(fadeOutDownClass);\n\t\t\tvar timer = setTimeout(function () {\n\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t\ttimer = null;\n\t\t\t\t\thideContainer();\n\t\t\t\t}, 400);\n\t\t}\n\t\tdocElem.classList.remove(imgLightboxOpenClass);\n\t\tdocBody.classList.remove(imgLightboxOpenClass);\n\t};\n\tvar imgLightbox = function (linkClass, settings) {\n\t\tvar _linkClass = linkClass || \"\";\n\t\tvar options = settings || {};\n\t\tvar rate = options.rate || 500;\n\t\tvar touch = options.touch;\n\t\tvar onError = options.onError;\n\t\tvar onLoaded = options.onLoaded;\n\t\tvar onCreated = options.onCreated;\n\t\tvar onClosed = options.onClosed;\n\t\tvar link = document.getElementsByClassName(_linkClass) || \"\";\n\t\tvar container = document.getElementsByClassName(containerClass)[0] || \"\";\n\t\tvar img = container ? container.getElementsByTagName(\"img\")[0] || \"\" : \"\";\n\t\tif (!container) {\n\t\t\tcontainer = document.createElement(\"div\");\n\t\t\tcontainer.classList.add(containerClass);\n\t\t\tvar html = [];\n\t\t\thtml.push('<img src=\"' + dummySrc + '\" alt=\"\" />');\n\t\t\thtml.push('<div class=\"half-circle-spinner\"><div class=\"circle circle-1\"></div><div class=\"circle circle-2\"></div></div>');\n\t\t\thtml.push('<a href=\"javascript:void(0);\" class=\"btn-close\"></a>');\n\t\t\tcontainer.innerHTML = html.join(\"\");\n\t\t\tdocBody.appendChild(container);\n\t\t\timg = container ? container.getElementsByTagName(\"img\")[0] || \"\" : \"\";\n\t\t\tvar btnClose = container ? container.getElementsByClassName(btnCloseClass)[0] || \"\" : \"\";\n\t\t\tvar handleImgLightboxContainer = function () {\n\t\t\t\thideImgLightbox(onClosed);\n\t\t\t};\n\t\t\tcontainer.addEventListener(\"click\", handleImgLightboxContainer);\n\t\t\tbtnClose.addEventListener(\"click\", handleImgLightboxContainer);\n\t\t\tif (!docElem.classList.contains(imgLightboxWindowIsBindedClass)) {\n\t\t\t\tdocElem.classList.add(imgLightboxWindowIsBindedClass);\n\t\t\t\troot.addEventListener(\"keyup\", function (ev) {\n\t\t\t\t\tif (27 === (ev.which || ev.keyCode)) {\n\t\t\t\t\t\thideImgLightbox(onClosed);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tvar arrange = function (e) {\n\t\t\tvar hrefString = e.getAttribute(\"href\") || e.getAttribute(\"data-src\") || \"\";\n\t\t\tvar dataTouch = e.getAttribute(\"data-touch\") || \"\";\n\t\t\tif (!hrefString) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar handleImgLightboxLink = function (ev) {\n\t\t\t\tev.stopPropagation();\n\t\t\t\tev.preventDefault();\n\t\t\t\tdocElem.classList.add(imgLightboxOpenClass);\n\t\t\t\tdocBody.classList.add(imgLightboxOpenClass);\n\t\t\t\tcontainer.classList.remove(isLoadedClass);\n\t\t\t\tvar logic = function logic() {\n\t\t\t\t\tif (onCreated) {\n\t\t\t\t\t\tcallCallback(onCreated, root);\n\t\t\t\t\t}\n\t\t\t\t\tcontainer.classList.add(animatedClass);\n\t\t\t\t\tcontainer.classList.add(fadeInClass);\n\t\t\t\t\timg.classList.add(animatedClass);\n\t\t\t\t\timg.classList.add(fadeInUpClass);\n\t\t\t\t\timg.onload = function () {\n\t\t\t\t\t\tcontainer.classList.add(isLoadedClass);\n\t\t\t\t\t\tif (onLoaded) {\n\t\t\t\t\t\t\tcallCallback(onLoaded, root);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\timg.onerror = function () {\n\t\t\t\t\t\tif (onError) {\n\t\t\t\t\t\t\tcallCallback(onError, root);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\timg.src = hrefString;\n\t\t\t\t\tsetDisplayBlock(container);\n\t\t\t\t};\n\t\t\t\tdebounce(logic, rate).call();\n\t\t\t};\n\t\t\tif (!e.classList.contains(imgLightboxLinkIsBindedClass)) {\n\t\t\t\te.classList.add(imgLightboxLinkIsBindedClass);\n\t\t\t\te.addEventListener(\"click\", handleImgLightboxLink);\n\t\t\t\tif (isTouch && (touch || dataTouch)) {\n\t\t\t\t\te.addEventListener(\"touchstart\", handleImgLightboxLink);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tif (container && img && link) {\n\t\t\tvar i,\n\t\t\tl;\n\t\t\tfor (i = 0, l = link.length; i < l; i += 1) {\n\t\t\t\tarrange(link[i]);\n\t\t\t}\n\t\t\ti = l = null;\n\t\t}\n\t};\n\troot.imgLightbox = imgLightbox;\n})(\"undefined\" !== typeof window ? window : this, document);\n"]}